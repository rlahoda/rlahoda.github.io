
<!DOCTYPE html>
<html lang="en" dir="ltr">
  
<head>
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-32142472-2', 'auto');
    ga('send', 'pageview');
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'"> -->
  <title>Rob Lahoda • Front End Web Developer</title>
  <!-- <base href="https://rlahoda.github.io"> -->
  <link rel="stylesheet" href="/css/styles.css">
  <link href="/vendor/prism/prism.css" rel="stylesheet" />
  <meta name="description" content="I'm a versatile, adaptable problem-solver. My strong mix of technical and creative skills give me a diverse perspective on the projects I work on.">
  <meta name="subject" content="">

  <meta property="og:url" content="https://rlahoda.github.io">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Rob Lahoda • Front End Web Developer">
  <meta property="og:image" content="https://rlahoda.github.io/assets/images/social-twitter.jpg">
  <meta property="og:description" content="I'm a versatile, adaptable problem-solver. My strong mix of technical and creative skills give me a diverse perspective on the projects I work on.">
  <meta property="og:site_name" content="Rob Lahoda • Front End Web Developer">
  <meta property="og:locale" content="en_US">
  <meta property="article:author" content="">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@rlahoda">
  <meta name="twitter:creator" content="@rlahoda">
  <meta name="twitter:url" content="https://rlahoda.github.io">
  <meta name="twitter:title" content="Rob Lahoda • Front End Web Developer">
  <meta name="twitter:description" content="I'm a versatile, adaptable problem-solver. My strong mix of technical and creative skills give me a diverse perspective on the projects I work on.">
  <meta name="twitter:image" content="https://rlahoda.github.io/assets/images/social-twitter.jpg">

  <meta name="robots" content="index,follow"><!-- All Search Engines -->
  <meta name="googlebot" content="index,follow"><!-- Google Specific -->

  <!-- <script src="/vendor/greensock-js/src/minified/TweenMax.min.js" charset="utf-8"></script>
  <script src="/vendor/greensock-js/src/minified/plugins/TextPlugin.min.js" charset="utf-8"></script>
  <script src="/vendor/greensock-js/src/minified/easing/EasePack.min.js" charset="utf-8"></script> -->
  <script src="/scripts/scripts-min.js" charset="utf-8"></script>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,700,900" rel="stylesheet">
</head>

  <body>
    <nav class="navFixed">
  <ul id="navList" class="navList">
    <li class="navList__navItem" id="navList__homeLink"><a href="../">Home</a></li>
    <li class="navList__navItem" id="navList__aboutLink"><a href="../about.html">About</a></li>
    <li class="navList__navItem" id="navList__projectsLink"><a href="../projects.html">Projects</a></li>
    <li class="navList__navItem" id="navList__projectsLink"><a href="../blog.html">Blog</a></li>
    <li class="navList__navItem" id="navList__contactLink"><a href="../contact.html">Contact</a></li>
  </ul>
</nav>
    <header>
      <div class="pageTopImage">
        
              </div>
    </header>

    <main>
      <div class="pageHeading">
        <!-- <h1 class="bigTitle">
          Blog</h1> -->
        <div class="pageTagline__container">

                  <h1 id="projectsTagline" class="pageTagline">React Leaflet Custom Map Icons</h1>
         <h2>November 19, 2019</h2>
        </div>
        <p></p>
      </div>
      <div class="blogContainer">

        <div class="blogCard recentPosts">
          <h3 class="noMargin">Check Out Some Recent Posts:</h3>
          <ul class="noList linkList">
                        <li class="linkList-links"><a href="leaflet-react-custom-icons.html">React Leaflet Custom Map Icons</a></br>
            <p class="noMargin indented">Nov 19, 2019</p></li>
                        <li class="linkList-links"><a href="use-const-even-when-you-think-you-shouldnt.html">Use 'const', Even When You Think You Shouldn't</a></br>
            <p class="noMargin indented">Jan 23, 2019</p></li>
                        <li class="linkList-links"><a href="an-easy-way-to-practice-with-twig-without-drupal.html">An Easy Way To Practice With Twig Without Drupal</a></br>
            <p class="noMargin indented">Mar 28, 2018</p></li>
                        <li class="linkList-links"><a href="hiding-progress-bar-steps-in-drupal-8-webform.html">Hiding Progress Bar Steps in Drupal 8 Webform</a></br>
            <p class="noMargin indented">Mar 26, 2018</p></li>
                      </ul>

        </div>
        <div class="blogCard">
          <a href="/blog.html">Back to the blog</a>
                <p>I&#39;ve always enjoyed travelling and exploring new places. Maps have been a way that I&#39;ve been able to see what somewhere is like without actually visiting. It&#39;s a fun way to plan, dream, explor, and get familiar with an area before I&#39;m able to visit in person. As a result, I&#39;ve had an interest in mapping projects and development. One of the most popular open-source Javascript libraries out there for mapping is <a href="https://leafletjs.com/">Leaflet</a>. Playing around with this library led me to start building my project <a href="https://myvacationmap.com">My Vacation Map</a>, a React-based mapping app that lets you add map points to various places and enter information about places you&#39;d like to see, things to do, etc.</p>
<p>Since the project is created in React, I came across the <a href="https://react-leaflet.js.org/">React Leaflet</a> project that is taking the Leaflet library and building a set of React components to make the library easy to use in a React project.</p>
<p>With my project, I wanted to have different icons representing the different types of map points that a user can create. Leaflet already supports having different icons on the map as desired but there was no clear example for doing the same in React Leaflet. I did some investigation and found some ways that other people were doing this but aside from some Stack Overflow answers, there wasn&#39;t any real helpful example that I could find to do this myself.</p>
<p>After much trial and error, I was able to get the custom points working and decided to go ahead and create a simple example to share with the React Leaflet project team to show others how to do it.</p>
<p>The entire example can be viewed in the <a href="https://github.com/PaulLeCam/react-leaflet/blob/master/example/components/custom-icons.js">React Leaflet Github Repository</a>.</p>
<p>Here&#39;s a quick explanation of what&#39;s happening.</p>
<h2 id="icons">Icons</h2>
<p>The first part of the process is to create the actual icons.</p>
<p>Each icon is defined as a leaflet Icon component <code>L.Icon()</code> and then a variety of parameters are passed to override the defaults for the Icon.</p>
<p>The most obvious parameters are <code>iconUrl</code> and <code>shadowUrl</code>, which are the paths to the custom icon graphic and shadow graphic, respectively. <code>iconRetinaUrl</code> is the path to the graphic to be used for high resolution monitors. In this example, I created an SVG graphic so it&#39;ll work fine for both types.</p>
<p><code>iconAnchor</code> and <code>popupAnchor</code> are used to determine how the image is positioned relative to the actual point on the map. Depending on the shape and design of your graphic, this might be above or even directly on top of the map point. These are in the x and y axes, respecively.</p>
<p><code>popupAnchor</code> defines the location of where the popup for this point will display relative to the map point itself, assuming one is being used. These are in the x and y axes, respecively.</p>
<p><code>iconSize</code> is the size of the custom icon itself with the first value being width and the second is height.</p>
<p><code>shadowSize</code> and <code>shadowAnchor</code> are the same types of information as <code>iconSize</code> and <code>iconAnchor</code>, but for the shadow.</p>
<p>Here&#39;s the full example icon definition:</p>
<pre><code class="language-javascript">export const pointerIcon = new L.Icon({
  iconUrl: require(&quot;../assets/pointerIcon.svg&quot;),
  iconRetinaUrl: require(&quot;../assets/pointerIcon.svg&quot;),
  iconAnchor: [5, 55],
  popupAnchor: [10, -44],
  iconSize: [25, 55],
  shadowUrl: &quot;../assets/marker-shadow.png&quot;,
  shadowSize: [68, 95],
  shadowAnchor: [20, 92]
});
</code></pre>
<h2 id="map-display">Map Display</h2>
<p>Displaying the custom icons is pretty easy once you get this far. Just like always, the <code>&lt;Marker/&gt;</code> component is called but with a new prop that&#39;s passed for the icon:</p>
<pre><code class="language-javascript">&lt;Marker position={position} icon={pointerIcon}&gt;
  // Popup or other information
&lt;/Marker&gt;
</code></pre>
<h2 id="webpack-issue">Webpack Issue</h2>
<p>For some reason, Webpack doesn&#39;t like to compile the code correctly when using custom icons. This is an issue with Create-React-App and might be for other Webpack setups, but my project is based on Create-React-App, so this is something I had to deal with.</p>
<p>What needs to be done is to remove the default icon from the original Leaflet class (imported here as <code>L.Icon</code>) and replace it with a custom icon. In my case, I created my own default point design, though using the default Leaflet point would work just fine, you would have to point to the files yourself here instead of relying on the defaults in the Leaflet package.</p>
<p>To override the defauts and force the use of the custom icons, here&#39;s a little snippet that I placed at the top of my component that was housing the React Leaflet <code>Map</code> component:</p>
<pre><code class="language-javascript">delete L.Icon.Default.prototype._getIconUrl;
L.Icon.Default.mergeOptions({
  iconRetinaUrl: require(&quot;../assets/starIcon.svg&quot;),
  iconUrl: require(&quot;../assets/starIcon.svg&quot;),
  shadowUrl: require(&quot;leaflet/dist/images/marker-shadow.png&quot;)
});
</code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>I hope this was helpful to understand a bit more about how to add custom map icons for Leaflet maps in React!</p>
          <a href="/blog.html">Back to the blog</a>
        </div>
        <div class="blogContainer">
          <div class="blogCard recentPosts">
            <h3 class="noMargin">Check Out Some Recent Posts:</h3>
            <ul class="noList linkList">
                            <li class="linkList-links"><a href="leaflet-react-custom-icons.html">React Leaflet Custom Map Icons</a></br>
              <p class="noMargin indented">Nov 19, 2019</p></li>
                            <li class="linkList-links"><a href="use-const-even-when-you-think-you-shouldnt.html">Use 'const', Even When You Think You Shouldn't</a></br>
              <p class="noMargin indented">Jan 23, 2019</p></li>
                            <li class="linkList-links"><a href="an-easy-way-to-practice-with-twig-without-drupal.html">An Easy Way To Practice With Twig Without Drupal</a></br>
              <p class="noMargin indented">Mar 28, 2018</p></li>
                            <li class="linkList-links"><a href="hiding-progress-bar-steps-in-drupal-8-webform.html">Hiding Progress Bar Steps in Drupal 8 Webform</a></br>
              <p class="noMargin indented">Mar 26, 2018</p></li>
                          </ul>
          </div>
        </div>
      </div>
    </main>

    <footer>
  <div class="footerLinks__container">
    <h4 class="">Say Hi!</h4>
  <ul class="noList noListBlock footerLinks__list">
              <li class="footerLinks__list--item">
          <a class="footerLinks__link" href="mailto:rob@roblahoda.com" onclick="trackOutboundLink('rob@roblahoda.com'); return false;" target="_blank"><span class="icons footerLinks__link--icon" id="email"></span>
          <p class="">Email</p></a>
        </li>
              <li class="footerLinks__list--item">
          <a class="footerLinks__link" href="https://twitter.com/rlahoda" onclick="trackOutboundLink('https://twitter.com/rlahoda'); return false;" target="_blank"><span class="icons footerLinks__link--icon" id="twitter"></span>
          <p class="">Twitter</p></a>
        </li>
              <li class="footerLinks__list--item">
          <a class="footerLinks__link" href="https://github.com/rlahoda" onclick="trackOutboundLink('https://github.com/rlahoda'); return false;" target="_blank"><span class="icons footerLinks__link--icon" id="github"></span>
          <p class="">Github</p></a>
        </li>
              <li class="footerLinks__list--item">
          <a class="footerLinks__link" href="https://codepen.io/rlahoda/" onclick="trackOutboundLink('https://codepen.io/rlahoda/'); return false;" target="_blank"><span class="icons footerLinks__link--icon" id="codepen">
          </span>
          <p class="">Codepen</p></a>
        </li>
              <li class="footerLinks__list--item">
          <a class="footerLinks__link" href="https://www.drupal.org/u/rlahoda/" onclick="trackOutboundLink('https://www.drupal.org/u/rlahoda/'); return false;" target="_blank"><span class="icons footerLinks__link--icon" id="drupal"></span>
          <p class="">Drupal.org</p></a>
        </li>
              <li class="footerLinks__list--item">
          <a class="footerLinks__link" href="https://www.linkedin.com/in/robert-lahoda/" onclick="trackOutboundLink('https://www.linkedin.com/in/robert-lahoda/'); return false;" target="_blank"><span class="icons footerLinks__link--icon" id="linkedin"></span>
          <p class="">Linkedin</p></a>
        </li>
            </ul>
            <p class="smallText">Copyright &copy; <script>document.write(new Date().getFullYear())</script> Rob Lahoda - Logos are property of their respective owners.</p>

</div>
<script src="/vendor/prism/prism.js"></script>
</footer>
    <script type="text/javascript" src="/vendor/scroll.js"></script>
<script>
/**
* Function that tracks a click on an outbound link in Analytics.
* This function takes a valid URL string as an argument, and uses that URL string
* as the event label. Setting the transport method to 'beacon' lets the hit be sent
* using 'navigator.sendBeacon' in browser that support it.
*/
var trackOutboundLink = function(url) {
 ga('send', 'event', 'outbound', 'click', url, {
   'transport': 'beacon',
   'hitCallback': function(){document.location = url;}
 });
}
</script>
  </body>
</html>
